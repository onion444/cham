getgenv().Configuration = {
   ["Active"] = true,
   ["filluseteamcolor"] = false,
   ["outlineuseteamcolor"] = false,
   ["fillcolor"] = Color3.new(0, 0, 255),
   ["outlinecolor"] = Color3.new(250, 0, 0),
   ["filltrans"] = 0,
   ["outlinetrans"] = 1 
}


local holder = game.CoreGui:FindFirstChild("ESPHolder") or Instance.new("Folder")
if enabled == false then
    holder:Destroy()
end

if holder.Name == "Folder" then
    holder.Name = "ESPHolder"
    holder.Parent = game.CoreGui
end

if uselocalplayer == false and holder:FindFirstChild(game.Players.LocalPlayer.Name) then
    holder:FindFirstChild(game.Players.LocalPlayer.Name):Destroy()
end

if getgenv().Configuration["Active"] == true then 
   getgenv().Configuration["Active"] = false
    getgenv().Configuration["Active"] = true
end
while getgenv().Configuration["Active"] do
    task.wait()
    for _,v in pairs(game.Players:GetChildren()) do
        local chr = v.Character
        if chr ~= nil then
        local esp = holder:FindFirstChild(v.Name) or Instance.new("")
        esp.Name = v.Name
        if uselocalplayer == false and esp.Name == game.Players.LocalPlayer.Name then
            else
        esp.Parent = holder
        if getgenv().Configuration["filluseteamcolor"] then
            esp.FillColor = v.TeamColor.Color
        else
            esp.FillColor = getgenv().Configuration["fillcolor"] 
        end
        if getgenv().Configuration["outlineuseteamcolor"] then
            esp.OutlineColor = v.TeamColor.Color
        else
            esp.OutlineColor = getgenv().Configuration["outlinecolor"]
        end
        esp.FillTransparency = getgenv().Configuration["filltrans"] 
        esp.OutlineTransparency = getgenv().Configuration["outlinetrans"] 
        esp.Adornee = chr
        esp.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        end
        end
    end
end
